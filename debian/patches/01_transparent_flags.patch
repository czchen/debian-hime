Subject: pass LDFLAGS envvars to Makefile
 This patch is used to pass LDFLAGS envvars to Makefile.
 Pull request sent to upstream. Not yet replied.
Forwarded: https://github.com/caleb-/hime/pull/379
Last-Update: 2012-06-18
Author: Yao Wei (魏銘廷) <mwei@lxde.org>

--- a/configure
+++ b/configure
@@ -48,7 +48,7 @@
   FREEBSD=1
 fi
 
-SO_FLAGS="-shared -Wl,--as-needed"
+SO_FLAGS="$LDFLAGS -shared -Wl,--as-needed"
 MAC_OS=0
 uname | grep Darwin > /dev/null 2> /dev/null
 if [ $? = 0 ]; then
@@ -499,7 +499,8 @@
 echo "libdir=\$(DESTDIR)$libdir" >> config.mak
 echo "himelibdir=\$(libdir)/hime" >> config.mak
 echo "includedir=\$(DESTDIR)$includedir" >> config.mak
-echo "LDFLAGS=-Wl,--as-needed -lX11 -lm" >> config.mak
+echo "LDFLAGS_ENV=$LDFLAGS" >> config.mak
+echo "LDFLAGS=$LDFLAGS -Wl,--as-needed -lX11 -lm" >> config.mak
 echo "LDFLAGS+=$GTKLDFLAGS -lX11 -ldl" >> config.mak
 echo "HIME_TABLE_DIR=\$(datadir_r)/hime/table" >> config.mak
 echo "HIME_OGG_DIR=\$(datadir_r)/hime/ogg" >> config.mak
--- a/src/qt4-im/Makefile
+++ b/src/qt4-im/Makefile
@@ -5,7 +5,7 @@
 -DQT_IMMODULE -DPIC
 OBJS= moc_hime-qt.o hime-qt.o im-hime-qt.o hime-imcontext-qt.o
 .SUFFIXES:	.c .cpp .a .so .E .h
-LDFLAGS=-L../im-client -lhime-im-client `pkg-config QtCore QtGui --libs`
+LDFLAGS=$(LDFLAGS_ENV) -L../im-client -lhime-im-client `pkg-config QtCore QtGui --libs`
 all:    im-hime.so
 
 .cpp.E:
